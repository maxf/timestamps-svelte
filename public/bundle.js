!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function a(t){t.forEach(e)}function r(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function p(t,e){t.appendChild(e)}function o(t,e,n){t.insertBefore(e,n||null)}function i(t){t.parentNode.removeChild(t)}function m(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function l(t){return document.createElement(t)}function c(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function u(t){return document.createTextNode(t)}function d(){return u(" ")}function f(t,e,n,a){return t.addEventListener(e,n,a),()=>t.removeEventListener(e,n,a)}function h(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function g(t,e){e=""+e,t.data!==e&&(t.data=e)}let S;function v(t){S=t}function w(t){(function(){if(!S)throw new Error("Function called outside component initialization");return S})().$$.on_mount.push(t)}const $=[],T=[],y=[],z=[],_=Promise.resolve();let x=!1;function b(t){y.push(t)}function q(){const t=new Set;do{for(;$.length;){const t=$.shift();v(t),M(t.$$)}for(;T.length;)T.pop()();for(;y.length;){const e=y.pop();t.has(e)||(e(),t.add(e))}}while($.length);for(;z.length;)z.pop()();x=!1}function M(t){t.fragment&&(t.update(t.dirty),a(t.before_render),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_render.forEach(b))}const O=new Set;const k="undefined"!=typeof window?window:global;function N(t,e){t.$$.dirty||($.push(t),x||(x=!0,_.then(q)),t.$$.dirty=n()),t.$$.dirty[e]=!0}function C(s,p,o,i,m,l){const c=S;v(s);const u=p.props||{},d=s.$$={fragment:null,ctx:null,props:l,update:t,not_equal:m,bound:n(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(c?c.$$.context:[]),callbacks:n(),dirty:null};let f=!1;var h,g,w;d.ctx=o?o(s,u,(t,e)=>{d.ctx&&m(d.ctx[t],d.ctx[t]=e)&&(d.bound[t]&&d.bound[t](e),f&&N(s,t))}):u,d.update(),f=!0,a(d.before_render),d.fragment=i(d.ctx),p.target&&(p.hydrate?d.fragment.l((w=p.target,Array.from(w.childNodes))):d.fragment.c(),p.intro&&((h=s.$$.fragment)&&h.i&&(O.delete(h),h.i(g))),function(t,n,s){const{fragment:p,on_mount:o,on_destroy:i,after_render:m}=t.$$;p.m(n,s),b(()=>{const n=o.map(e).filter(r);i?i.push(...n):a(n),t.$$.on_mount=[]}),m.forEach(b)}(s,p.target,p.anchor),q()),v(c)}class E{$destroy(){var e,n;n=1,(e=this).$$.fragment&&(a(e.$$.on_destroy),e.$$.fragment.d(n),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={}),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const{Object:B}=k;function j(t,e,n){const a=B.create(t);return a.t=e[n],a}function A(t,e,n){const a=B.create(t);return a.t=e[n],a}function D(t){var e,n,r,s,m,c,g,S,v,w,$,T,y,z,_=t.appState.errorMessage&&F(t);return{c(){(e=l("button")).textContent="Add",n=d(),(r=l("button")).textContent="Cancel",s=d(),_&&_.c(),m=d(),c=l("div"),g=l("input"),S=u("/"),v=l("input"),w=u("\n    @\n    "),$=l("input"),T=u(":"),y=l("input"),h(e,"class","big add svelte-9zqfrz"),h(r,"class","big svelte-9zqfrz"),h(g,"class","date-2 svelte-9zqfrz"),h(g,"inputmode","numeric"),h(v,"class","date-2 svelte-9zqfrz"),h(v,"inputmode","numeric"),h($,"class","date-2 svelte-9zqfrz"),h($,"inputmode","numeric"),h(y,"class","date-2 svelte-9zqfrz"),h(y,"inputmode","numeric"),h(c,"class","date-input svelte-9zqfrz"),z=[f(e,"click",t.addTimestamp),f(r,"click",t.cancelAddTimestamp),f(g,"input",t.input0_input_handler),f(v,"input",t.input1_input_handler),f($,"input",t.input2_input_handler),f(y,"input",t.input3_input_handler)]},m(a,i){o(a,e,i),o(a,n,i),o(a,r,i),o(a,s,i),_&&_.m(a,i),o(a,m,i),o(a,c,i),p(c,g),g.value=t.appState.newTimestamp.date,p(c,S),p(c,v),v.value=t.appState.newTimestamp.month1,p(c,w),p(c,$),$.value=t.appState.newTimestamp.hours,p(c,T),p(c,y),y.value=t.appState.newTimestamp.minutes},p(t,e){e.appState.errorMessage?_?_.p(t,e):((_=F(e)).c(),_.m(m.parentNode,m)):_&&(_.d(1),_=null),t.appState&&g.value!==e.appState.newTimestamp.date&&(g.value=e.appState.newTimestamp.date),t.appState&&v.value!==e.appState.newTimestamp.month1&&(v.value=e.appState.newTimestamp.month1),t.appState&&$.value!==e.appState.newTimestamp.hours&&($.value=e.appState.newTimestamp.hours),t.appState&&y.value!==e.appState.newTimestamp.minutes&&(y.value=e.appState.newTimestamp.minutes)},d(t){t&&(i(e),i(n),i(r),i(s)),_&&_.d(t),t&&(i(m),i(c)),a(z)}}}function I(e){var n,a;return{c(){(n=l("button")).textContent="New",h(n,"class","big svelte-9zqfrz"),a=f(n,"click",e.prepareNewTimestamp)},m(t,e){o(t,n,e)},p:t,d(t){t&&i(n),a()}}}function F(t){var e,n,a=t.appState.errorMessage;return{c(){e=l("div"),n=u(a),h(e,"class","error-message svelte-9zqfrz")},m(t,a){o(t,e,a),p(e,n)},p(t,e){t.appState&&a!==(a=e.appState.errorMessage)&&g(n,a)},d(t){t&&i(e)}}}function J(t){for(var e,n,r,s,u,g,S,v,w,$,T=t.appState.timestamps.sort(L),y=[],z=0;z<T.length;z+=1)y[z]=R(A(t,T,z));var _=t.appState.timestamps,x=[];for(z=0;z<_.length;z+=1)x[z]=V(j(t,_,z));return{c(){e=l("ul");for(var a=0;a<y.length;a+=1)y[a].c();n=d(),(r=l("button")).textContent="Copy",s=d(),(u=l("button")).textContent="Reset",g=d(),S=c("svg"),v=c("rect");for(a=0;a<x.length;a+=1)x[a].c();h(e,"class","ts-list svelte-9zqfrz"),h(r,"class","small svelte-9zqfrz"),h(u,"class","small svelte-9zqfrz"),h(v,"x","18120"),h(v,"y","0"),h(v,"width","5"),h(v,"height","86400"),h(v,"fill","#ddd"),h(S,"viewBox",w=t.chartViewBox(t.appState.timestamps)),h(S,"preserveAspectRatio","none"),h(S,"width","100%"),h(S,"height","200px"),h(S,"class","svelte-9zqfrz"),$=[f(r,"click",t.copy),f(u,"click",t.reset)]},m(t,a){o(t,e,a);for(var i=0;i<y.length;i+=1)y[i].m(e,null);o(t,n,a),o(t,r,a),o(t,s,a),o(t,u,a),o(t,g,a),o(t,S,a),p(S,v);for(i=0;i<x.length;i+=1)x[i].m(S,null)},p(t,n){if(t.formatTimestamp||t.appState){T=n.appState.timestamps.sort(L);for(var a=0;a<T.length;a+=1){const r=A(n,T,a);y[a]?y[a].p(t,r):(y[a]=R(r),y[a].c(),y[a].m(e,null))}for(;a<y.length;a+=1)y[a].d(1);y.length=T.length}if(t.dayOfTimestamp||t.appState||t.timeOfTimestamp){_=n.appState.timestamps;for(a=0;a<_.length;a+=1){const e=j(n,_,a);x[a]?x[a].p(t,e):(x[a]=V(e),x[a].c(),x[a].m(S,null))}for(;a<x.length;a+=1)x[a].d(1);x.length=_.length}t.appState&&w!==(w=n.chartViewBox(n.appState.timestamps))&&h(S,"viewBox",w)},d(t){t&&i(e),m(y,t),t&&(i(n),i(r),i(s),i(u),i(g),i(S)),m(x,t),a($)}}}function R(t){var e,n,a,r,s,m,c=t.formatTimestamp(t.t);function S(){return t.click_handler(t)}return{c(){e=l("li"),n=u(c),a=d(),(r=l("button")).textContent="❌",s=d(),h(r,"class","del svelte-9zqfrz"),h(e,"class","svelte-9zqfrz"),m=f(r,"click",S)},m(t,i){o(t,e,i),p(e,n),p(e,a),p(e,r),p(e,s)},p(e,a){t=a,e.appState&&c!==(c=t.formatTimestamp(t.t))&&g(n,c)},d(t){t&&i(e),m()}}}function V(t){var e,n,a;return{c(){h(e=c("rect"),"x",n=t.dayOfTimestamp(t.t)),h(e,"y",a=t.timeOfTimestamp(t.t)/1e3),h(e,"width","1"),h(e,"height","1000"),h(e,"fill","red")},m(t,n){o(t,e,n)},p(t,r){t.appState&&n!==(n=r.dayOfTimestamp(r.t))&&h(e,"x",n),t.appState&&a!==(a=r.timeOfTimestamp(r.t)/1e3)&&h(e,"y",a)},d(t){t&&i(e)}}}function H(e){var n,a,r,s,m,c,f;function S(t){return t.appState.newTimestamp?D:I}var v=S(e),w=v(e),$=e.appState.timestamps.length&&J(e);return{c(){n=l("div"),a=l("h1"),r=l("img"),s=d(),m=u(e.name),c=d(),w.c(),f=d(),$&&$.c(),h(r,"src","clock-icon-192.png"),h(r,"alt","clock icon"),h(r,"height","20px"),h(a,"class","svelte-9zqfrz"),h(n,"class","component svelte-9zqfrz")},m(t,e){o(t,n,e),p(n,a),p(a,r),p(a,s),p(a,m),p(n,c),w.m(n,null),p(n,f),$&&$.m(n,null)},p(t,e){t.name&&g(m,e.name),v===(v=S(e))&&w?w.p(t,e):(w.d(1),(w=v(e))&&(w.c(),w.m(n,f))),e.appState.timestamps.length?$?$.p(t,e):(($=J(e)).c(),$.m(n,null)):$&&($.d(1),$=null)},i:t,o:t,d(t){t&&i(n),w.d(),$&&$.d()}}}function L(t,e){return e-t}function Y(t,e,n){let{name:a}=e;const r={timestamps:[],newTimestamp:null,errorMessage:null},s=(t,e)=>t.toString().padStart(e,"0"),p=t=>`${t.getDate()}/${t.getMonth()+1}/${s(t.getFullYear(),4)}`+", "+`${t.getHours()}:${s(t.getMinutes(),2)}`+"\n",o=()=>{const t=localStorage.getItem("timestamps");let e;try{e=JSON.parse(t)}catch(t){console.log("failed to parse localstorage json."),e=null}return(t=>!!t&&t.constructor===Object)(e)||(console.log("localstorage is not an object. Resetting to {}"),localStorage.setItem("timestamps","{}"),e={}),e},i=t=>{r.timestamps=r.timestamps.filter(e=>e!==t),n("appState",r)},m=t=>Math.floor(t/864e5);return w(()=>{r.timestamps=(t=>{const e=o();return e[t]?e[t].map(t=>new Date(Date.parse(t))):[]})(a),n("appState",r),r.newTimestamp=null,n("appState",r)}),t.$set=(t=>{"name"in t&&n("name",a=t.name)}),{name:a,appState:r,formatTimestamp:p,prepareNewTimestamp:()=>{var t=new Date;r.newTimestamp={date:t.getDate(),month1:t.getMonth()+1,year:t.getFullYear(),hours:t.getHours(),minutes:t.getMinutes()},n("appState",r)},addTimestamp:()=>{const t=r.newTimestamp,e=new Date(t.year,t.month1-1,t.date,t.hours,t.minutes);(t=>t instanceof Date&&!isNaN(t))(e)?(r.errorMessage=null,n("appState",r),r.timestamps.push(e),((t,e)=>{const n=o();n[t]=e,localStorage.setItem("timestamps",JSON.stringify(n))})(a,r.timestamps.sort((t,e)=>t-e)),r.newTimestamp=null,n("appState",r)):(r.errorMessage="Bad timestamp",n("appState",r))},deleteTimestamp:i,cancelAddTimestamp:()=>{const t=r.newTimestamp=null;return n("appState",r),t},reset:()=>{r.timestamps=[],n("appState",r),r.newTimestamp=null,n("appState",r),(t=>{const e=o();delete e[t],localStorage.setItem("timestamps",JSON.stringify(e))})(a)},copy:()=>{const t=r.timestamps.map(p).join("");navigator.clipboard.writeText(t)},dayOfTimestamp:m,timeOfTimestamp:t=>t-1e3*m(t)*3600*24,chartViewBox:t=>{const e=Math.min.apply(this,t),n=Math.max.apply(this,t),a=m(e);return`${a} 0 ${m(n)-a+1} 86400`},input0_input_handler:function(){r.newTimestamp.date=this.value,n("appState",r)},input1_input_handler:function(){r.newTimestamp.month1=this.value,n("appState",r)},input2_input_handler:function(){r.newTimestamp.hours=this.value,n("appState",r)},input3_input_handler:function(){r.newTimestamp.minutes=this.value,n("appState",r)},click_handler:function({t:t}){return i(t)}}}class P extends E{constructor(t){super(),C(this,t,Y,H,s,["name"])}}new P({target:document.getElementById("ts1"),props:{name:"TS1"}}),new P({target:document.getElementById("ts2"),props:{name:"TS2"}})}();
//# sourceMappingURL=bundle.js.map
