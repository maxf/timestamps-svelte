!function(){"use strict";function t(){}function e(t){return t()}function a(){return Object.create(null)}function n(t){t.forEach(e)}function p(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t,e){t.appendChild(e)}function o(t,e,a){t.insertBefore(e,a||null)}function r(t){t.parentNode.removeChild(t)}function m(t,e){for(let a=0;a<t.length;a+=1)t[a]&&t[a].d(e)}function l(t){return document.createElement(t)}function u(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function c(t){return document.createTextNode(t)}function d(){return c(" ")}function f(t,e,a,n){return t.addEventListener(e,a,n),()=>t.removeEventListener(e,a,n)}function g(t,e,a){null==a?t.removeAttribute(e):t.setAttribute(e,a)}function h(t,e){e=""+e,t.data!==e&&(t.data=e)}let S;function v(t){S=t}function T(t){(function(){if(!S)throw new Error("Function called outside component initialization");return S})().$$.on_mount.push(t)}const w=[],$=[],x=[],y=[],_=Promise.resolve();let b=!1;function O(t){x.push(t)}function I(){const t=new Set;do{for(;w.length;){const t=w.shift();v(t),k(t.$$)}for(;$.length;)$.pop()();for(;x.length;){const e=x.pop();t.has(e)||(e(),t.add(e))}}while(w.length);for(;y.length;)y.pop()();b=!1}function k(t){t.fragment&&(t.update(t.dirty),n(t.before_render),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_render.forEach(O))}const N=new Set;const C="undefined"!=typeof window?window:global;function E(t,e){t.$$.dirty||(w.push(t),b||(b=!0,_.then(I)),t.$$.dirty=a()),t.$$.dirty[e]=!0}function V(s,i,o,r,m,l){const u=S;v(s);const c=i.props||{},d=s.$$={fragment:null,ctx:null,props:l,update:t,not_equal:m,bound:a(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(u?u.$$.context:[]),callbacks:a(),dirty:null};let f=!1;var g,h,T;d.ctx=o?o(s,c,(t,e)=>{d.ctx&&m(d.ctx[t],d.ctx[t]=e)&&(d.bound[t]&&d.bound[t](e),f&&E(s,t))}):c,d.update(),f=!0,n(d.before_render),d.fragment=r(d.ctx),i.target&&(i.hydrate?d.fragment.l((T=i.target,Array.from(T.childNodes))):d.fragment.c(),i.intro&&((g=s.$$.fragment)&&g.i&&(N.delete(g),g.i(h))),function(t,a,s){const{fragment:i,on_mount:o,on_destroy:r,after_render:m}=t.$$;i.m(a,s),O(()=>{const a=o.map(e).filter(p);r?r.push(...a):n(a),t.$$.on_mount=[]}),m.forEach(O)}(s,i.target,i.anchor),I()),v(u)}class B{$destroy(){var e,a;a=1,(e=this).$$.fragment&&(n(e.$$.on_destroy),e.$$.fragment.d(a),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={}),this.$destroy=t}$on(t,e){const a=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return a.push(e),()=>{const t=a.indexOf(e);-1!==t&&a.splice(t,1)}}$set(){}}const{Object:D}=C;function M(t,e,a){const n=D.create(t);return n.t=e[a],n}function A(t,e,a){const n=D.create(t);return n.t=e[a],n}function J(t){var e,a,n,p,s=t.appState.message.text;return{c(){e=l("div"),a=l("span"),n=c(s),g(a,"class",p="level-"+t.appState.message.level+" svelte-1d45u7g"),g(e,"class","message svelte-1d45u7g")},m(t,p){o(t,e,p),i(e,a),i(a,n)},p(t,e){t.appState&&s!==(s=e.appState.message.text)&&h(n,s),t.appState&&p!==(p="level-"+e.appState.message.level+" svelte-1d45u7g")&&g(a,"class",p)},d(t){t&&r(e)}}}function j(t){var e,a,p,s,m,u,h,S,v,T,w,$,x;return{c(){(e=l("button")).textContent="Add",a=d(),(p=l("button")).textContent="Cancel",s=d(),m=l("div"),u=l("input"),h=c("/"),S=l("input"),v=c("\n    @\n    "),T=l("input"),w=c(":"),$=l("input"),g(e,"class","big add svelte-1d45u7g"),g(p,"class","big svelte-1d45u7g"),g(u,"class","date-2 svelte-1d45u7g"),g(u,"inputmode","numeric"),g(S,"class","date-2 svelte-1d45u7g"),g(S,"inputmode","numeric"),g(T,"class","date-2 svelte-1d45u7g"),g(T,"inputmode","numeric"),g($,"class","date-2 svelte-1d45u7g"),g($,"inputmode","numeric"),g(m,"class","date-input svelte-1d45u7g"),x=[f(e,"click",t.addTimestamp),f(p,"click",t.cancelAddTimestamp),f(u,"input",t.input0_input_handler),f(S,"input",t.input1_input_handler),f(T,"input",t.input2_input_handler),f($,"input",t.input3_input_handler)]},m(n,r){o(n,e,r),o(n,a,r),o(n,p,r),o(n,s,r),o(n,m,r),i(m,u),u.value=t.appState.newTimestamp.date,i(m,h),i(m,S),S.value=t.appState.newTimestamp.month1,i(m,v),i(m,T),T.value=t.appState.newTimestamp.hours,i(m,w),i(m,$),$.value=t.appState.newTimestamp.minutes},p(t,e){t.appState&&u.value!==e.appState.newTimestamp.date&&(u.value=e.appState.newTimestamp.date),t.appState&&S.value!==e.appState.newTimestamp.month1&&(S.value=e.appState.newTimestamp.month1),t.appState&&T.value!==e.appState.newTimestamp.hours&&(T.value=e.appState.newTimestamp.hours),t.appState&&$.value!==e.appState.newTimestamp.minutes&&($.value=e.appState.newTimestamp.minutes)},d(t){t&&(r(e),r(a),r(p),r(s),r(m)),n(x)}}}function F(e){var a,n;return{c(){(a=l("button")).textContent="New",g(a,"class","big svelte-1d45u7g"),n=f(a,"click",e.prepareNewTimestamp)},m(t,e){o(t,a,e)},p:t,d(t){t&&r(a),n()}}}function H(t){for(var e,a,p,s,i,c,h,S,v,T,w,$=t.appState.timestamps.sort(z),x=[],y=0;y<$.length;y+=1)x[y]=L(A(t,$,y));var _=t.appState.timestamps,b=[];for(y=0;y<_.length;y+=1)b[y]=R(M(t,_,y));return{c(){e=l("ul");for(var n=0;n<x.length;n+=1)x[n].c();a=d(),(p=l("button")).textContent="Copy",s=d(),(i=l("button")).textContent="Reset",c=d(),h=u("svg");for(n=0;n<b.length;n+=1)b[n].c();v=d(),(T=l("button")).textContent="Export",g(e,"class","ts-list svelte-1d45u7g"),g(p,"class","small svelte-1d45u7g"),g(i,"class","small svelte-1d45u7g"),g(h,"viewBox",S=t.chartViewBox(t.appState.timestamps)),g(h,"preserveAspectRatio","none"),g(h,"width","100%"),g(h,"height","200px"),g(h,"class","svelte-1d45u7g"),g(T,"class","small svelte-1d45u7g"),w=[f(p,"click",t.copy),f(i,"click",t.reset),f(T,"click",t.exportTimestamps)]},m(t,n){o(t,e,n);for(var r=0;r<x.length;r+=1)x[r].m(e,null);o(t,a,n),o(t,p,n),o(t,s,n),o(t,i,n),o(t,c,n),o(t,h,n);for(r=0;r<b.length;r+=1)b[r].m(h,null);o(t,v,n),o(t,T,n)},p(t,a){if(t.formatTimestamp||t.appState){$=a.appState.timestamps.sort(z);for(var n=0;n<$.length;n+=1){const p=A(a,$,n);x[n]?x[n].p(t,p):(x[n]=L(p),x[n].c(),x[n].m(e,null))}for(;n<x.length;n+=1)x[n].d(1);x.length=$.length}if(t.dayOfTimestamp||t.appState||t.timeOfTimestamp){_=a.appState.timestamps;for(n=0;n<_.length;n+=1){const e=M(a,_,n);b[n]?b[n].p(t,e):(b[n]=R(e),b[n].c(),b[n].m(h,null))}for(;n<b.length;n+=1)b[n].d(1);b.length=_.length}t.appState&&S!==(S=a.chartViewBox(a.appState.timestamps))&&g(h,"viewBox",S)},d(t){t&&r(e),m(x,t),t&&(r(a),r(p),r(s),r(i),r(c),r(h)),m(b,t),t&&(r(v),r(T)),n(w)}}}function L(t){var e,a,n,p,s,m,u=t.formatTimestamp(t.t);function S(){return t.click_handler(t)}return{c(){e=l("li"),a=c(u),n=d(),(p=l("button")).textContent="❌",s=d(),g(p,"class","del svelte-1d45u7g"),g(e,"class","svelte-1d45u7g"),m=f(p,"click",S)},m(t,r){o(t,e,r),i(e,a),i(e,n),i(e,p),i(e,s)},p(e,n){t=n,e.appState&&u!==(u=t.formatTimestamp(t.t))&&h(a,u)},d(t){t&&r(e),m()}}}function R(t){var e,a,n;return{c(){g(e=u("rect"),"x",a=t.dayOfTimestamp(t.t)),g(e,"y",n=t.timeOfTimestamp(t.t)/1e3),g(e,"width","1"),g(e,"height","1000"),g(e,"fill","red")},m(t,a){o(t,e,a)},p(t,p){t.appState&&a!==(a=p.dayOfTimestamp(p.t))&&g(e,"x",a),t.appState&&n!==(n=p.timeOfTimestamp(p.t)/1e3)&&g(e,"y",n)},d(t){t&&r(e)}}}function Y(t){var e,a,p,s;return{c(){e=l("input"),a=d(),(p=l("button")).textContent="Go",g(e,"class","import-input svelte-1d45u7g"),g(p,"class","small svelte-1d45u7g"),s=[f(e,"input",t.input_input_handler),f(p,"click",t.doImport)]},m(n,s){o(n,e,s),e.value=t.appState.dataToImport,o(n,a,s),o(n,p,s)},p(t,a){t.appState&&e.value!==a.appState.dataToImport&&(e.value=a.appState.dataToImport)},d(t){t&&(r(e),r(a),r(p)),n(s)}}}function q(e){var a,n,p,s,m,u,S,v,T,w,$,x,y=e.appState.message.text&&J(e);function _(t){return t.appState.newTimestamp?j:F}var b=_(e),O=b(e),I=e.appState.timestamps.length&&H(e),k=e.appState.importVisible&&Y(e);return{c(){a=l("div"),n=l("h1"),p=l("img"),s=d(),m=c(e.name),u=d(),y&&y.c(),S=d(),O.c(),v=d(),I&&I.c(),T=d(),(w=l("button")).textContent="Import",$=d(),k&&k.c(),g(p,"src","clock-icon-192.png"),g(p,"alt","clock icon"),g(p,"height","20px"),g(n,"class","svelte-1d45u7g"),g(w,"class","small svelte-1d45u7g"),g(a,"class","component svelte-1d45u7g"),x=f(w,"click",e.toggleImport)},m(t,e){o(t,a,e),i(a,n),i(n,p),i(n,s),i(n,m),i(a,u),y&&y.m(a,null),i(a,S),O.m(a,null),i(a,v),I&&I.m(a,null),i(a,T),i(a,w),i(a,$),k&&k.m(a,null)},p(t,e){t.name&&h(m,e.name),e.appState.message.text?y?y.p(t,e):((y=J(e)).c(),y.m(a,S)):y&&(y.d(1),y=null),b===(b=_(e))&&O?O.p(t,e):(O.d(1),(O=b(e))&&(O.c(),O.m(a,v))),e.appState.timestamps.length?I?I.p(t,e):((I=H(e)).c(),I.m(a,T)):I&&(I.d(1),I=null),e.appState.importVisible?k?k.p(t,e):((k=Y(e)).c(),k.m(a,null)):k&&(k.d(1),k=null)},i:t,o:t,d(t){t&&r(a),y&&y.d(),O.d(),I&&I.d(),k&&k.d(),x()}}}function z(t,e){return e-t}function G(t,e,a){let{name:n}=e;const p={timestamps:[],newTimestamp:null,message:{level:0,text:null},importVisible:!1,dataToImport:null},s=(t,e)=>{const n=p.message={level:e||0,text:t};return a("appState",p),n},i=()=>{const t=p.message={level:0,text:null};return a("appState",p),t},o=(t,e)=>t.toString().padStart(e,"0"),r=t=>`${t.getDate()}/${t.getMonth()+1}/${o(t.getFullYear(),4)}`+", "+`${t.getHours()}:${o(t.getMinutes(),2)}`+"\n",m=()=>{const t=localStorage.getItem("timestamps");let e;try{e=JSON.parse(t)}catch(t){s("failed to parse localstorage json.",1),e=null}return(t=>!!t&&t.constructor===Object)(e)||(s("Failed to get data from localstorage"),localStorage.setItem("timestamps","{}"),e={}),e},l=(t,e)=>{const a=m();a[t]=e,localStorage.setItem("timestamps",JSON.stringify(a))},u=t=>{p.timestamps=p.timestamps.filter(e=>e!==t),a("appState",p)},c=t=>Math.floor(t/864e5);return T(()=>{p.timestamps=(t=>{const e=m();return e[t]?e[t].map(t=>new Date(Date.parse(t))):[]})(n),a("appState",p),p.newTimestamp=null,a("appState",p)}),t.$set=(t=>{"name"in t&&a("name",n=t.name)}),{name:n,appState:p,formatTimestamp:r,prepareNewTimestamp:()=>{i();var t=new Date;p.newTimestamp={date:t.getDate(),month1:t.getMonth()+1,year:t.getFullYear(),hours:t.getHours(),minutes:t.getMinutes()},a("appState",p)},addTimestamp:()=>{const t=p.newTimestamp,e=new Date(t.year,t.month1-1,t.date,t.hours,t.minutes);(t=>t instanceof Date&&!isNaN(t))(e)?(p.timestamps.push(e),l(n,p.timestamps.sort((t,e)=>t-e)),p.newTimestamp=null,a("appState",p),s("timestamp added")):s("error adding timestamp",1)},deleteTimestamp:u,exportTimestamps:()=>{const t=JSON.stringify(p.timestamps);navigator.clipboard.writeText(t),s("timestamps copied")},toggleImport:()=>{p.importVisible=!p.importVisible,a("appState",p),p.dataToImport="",a("appState",p)},doImport:()=>{try{const t=JSON.parse(p.dataToImport);p.importVisible=!1,a("appState",p),p.timestamps=t.map(t=>new Date(t)),a("appState",p),p.newTimestamp=null,a("appState",p),l(n,t),s("imported JSON",0)}catch(t){s("error importing JSON",1)}},cancelAddTimestamp:()=>{p.newTimestamp=null,a("appState",p),i()},reset:()=>{p.timestamps=[],a("appState",p),p.newTimestamp=null,a("appState",p),(t=>{const e=m();delete e[t],localStorage.setItem("timestamps",JSON.stringify(e))})(n),s("erased all data")},copy:()=>{const t=p.timestamps.map(r).join("");navigator.clipboard.writeText(t),s("timestamps copied")},dayOfTimestamp:c,timeOfTimestamp:t=>t-1e3*c(t)*3600*24,chartViewBox:t=>{const e=Math.min.apply(this,t),a=Math.max.apply(this,t),n=c(e);return`${n} 0 ${c(a)-n+1} 86400`},input0_input_handler:function(){p.newTimestamp.date=this.value,a("appState",p)},input1_input_handler:function(){p.newTimestamp.month1=this.value,a("appState",p)},input2_input_handler:function(){p.newTimestamp.hours=this.value,a("appState",p)},input3_input_handler:function(){p.newTimestamp.minutes=this.value,a("appState",p)},click_handler:function({t:t}){return u(t)},input_input_handler:function(){p.dataToImport=this.value,a("appState",p)}}}class P extends B{constructor(t){super(),V(this,t,G,q,s,["name"])}}new P({target:document.getElementById("ts1"),props:{name:"TS1"}}),new P({target:document.getElementById("ts2"),props:{name:"TS2"}})}();
//# sourceMappingURL=bundle.js.map
