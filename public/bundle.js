!function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function a(t){t.forEach(e)}function s(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t,e){t.appendChild(e)}function r(t,e,n){t.insertBefore(e,n||null)}function m(t){t.parentNode.removeChild(t)}function l(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function u(){return p(" ")}function c(t,e,n,a){return t.addEventListener(e,n,a),()=>t.removeEventListener(e,n,a)}function d(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function f(t,e){e=""+e,t.data!==e&&(t.data=e)}let h;function g(t){h=t}function v(t){(function(){if(!h)throw new Error("Function called outside component initialization");return h})().$$.on_mount.push(t)}const S=[],w=[],$=[],y=[],b=Promise.resolve();let T=!1;function _(t){$.push(t)}function x(){const t=new Set;do{for(;S.length;){const t=S.shift();g(t),k(t.$$)}for(;w.length;)w.pop()();for(;$.length;){const e=$.pop();t.has(e)||(e(),t.add(e))}}while(S.length);for(;y.length;)y.pop()();T=!1}function k(t){t.fragment&&(t.update(t.dirty),a(t.before_render),t.fragment.p(t.dirty,t.ctx),t.dirty=null,t.after_render.forEach(_))}const C=new Set;const E="undefined"!=typeof window?window:global;function I(t,e){t.$$.dirty||(S.push(t),T||(T=!0,b.then(x)),t.$$.dirty=n()),t.$$.dirty[e]=!0}function N(o,i,r,m,l,p){const u=h;g(o);const c=i.props||{},d=o.$$={fragment:null,ctx:null,props:p,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],before_render:[],after_render:[],context:new Map(u?u.$$.context:[]),callbacks:n(),dirty:null};let f=!1;var v,S,w;d.ctx=r?r(o,c,(t,e)=>{d.ctx&&l(d.ctx[t],d.ctx[t]=e)&&(d.bound[t]&&d.bound[t](e),f&&I(o,t))}):c,d.update(),f=!0,a(d.before_render),d.fragment=m(d.ctx),i.target&&(i.hydrate?d.fragment.l((w=i.target,Array.from(w.childNodes))):d.fragment.c(),i.intro&&((v=o.$$.fragment)&&v.i&&(C.delete(v),v.i(S))),function(t,n,o){const{fragment:i,on_mount:r,on_destroy:m,after_render:l}=t.$$;i.m(n,o),_(()=>{const n=r.map(e).filter(s);m?m.push(...n):a(n),t.$$.on_mount=[]}),l.forEach(_)}(o,i.target,i.anchor),x()),g(u)}class j{$destroy(){var e,n;n=1,(e=this).$$.fragment&&(a(e.$$.on_destroy),e.$$.fragment.d(n),e.$$.on_destroy=e.$$.fragment=null,e.$$.ctx={}),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}const{Object:D}=E;function O(t,e,n){const a=D.create(t);return a.t=e[n],a}function A(t){var e,n,s,o,f,h,g,v,S,w,$,y,b;return{c(){(e=l("button")).textContent="Add",n=u(),(s=l("button")).textContent="Cancel",o=u(),f=l("div"),h=l("input"),g=p("/"),v=l("input"),S=p("\n    @\n    "),w=l("input"),$=p(":"),y=l("input"),d(e,"class","big add svelte-1lyumdb"),d(s,"class","big svelte-1lyumdb"),d(h,"class","date-2 svelte-1lyumdb"),d(h,"inputmode","numeric"),d(v,"class","date-2 svelte-1lyumdb"),d(v,"inputmode","numeric"),d(w,"class","date-2 svelte-1lyumdb"),d(w,"inputmode","numeric"),d(y,"class","date-2 svelte-1lyumdb"),d(y,"inputmode","numeric"),d(f,"class","date-input svelte-1lyumdb"),b=[c(e,"click",t.addTimestamp),c(s,"click",t.cancelAddTimestamp),c(h,"input",t.input0_input_handler),c(v,"input",t.input1_input_handler),c(w,"input",t.input2_input_handler),c(y,"input",t.input3_input_handler)]},m(a,m){r(a,e,m),r(a,n,m),r(a,s,m),r(a,o,m),r(a,f,m),i(f,h),h.value=t.appState.newTimestamp.date,i(f,g),i(f,v),v.value=t.appState.newTimestamp.month,i(f,S),i(f,w),w.value=t.appState.newTimestamp.hours,i(f,$),i(f,y),y.value=t.appState.newTimestamp.minutes},p(t,e){t.appState&&h.value!==e.appState.newTimestamp.date&&(h.value=e.appState.newTimestamp.date),t.appState&&v.value!==e.appState.newTimestamp.month&&(v.value=e.appState.newTimestamp.month),t.appState&&w.value!==e.appState.newTimestamp.hours&&(w.value=e.appState.newTimestamp.hours),t.appState&&y.value!==e.appState.newTimestamp.minutes&&(y.value=e.appState.newTimestamp.minutes)},d(t){t&&(m(e),m(n),m(s),m(o),m(f)),a(b)}}}function M(e){var n,a;return{c(){(n=l("button")).textContent="New",d(n,"class","big svelte-1lyumdb"),a=c(n,"click",e.prepareNewTimestamp)},m(t,e){r(t,n,e)},p:t,d(t){t&&m(n),a()}}}function B(t){for(var e,n,s,o,i,p,f=t.appState.timestamps,h=[],g=0;g<f.length;g+=1)h[g]=F(O(t,f,g));return{c(){e=l("ul");for(var a=0;a<h.length;a+=1)h[a].c();n=u(),(s=l("button")).textContent="Copy",o=u(),(i=l("button")).textContent="Reset",d(e,"class","svelte-1lyumdb"),d(s,"class","small svelte-1lyumdb"),d(i,"class","small svelte-1lyumdb"),p=[c(s,"click",t.copy),c(i,"click",t.reset)]},m(t,a){r(t,e,a);for(var m=0;m<h.length;m+=1)h[m].m(e,null);r(t,n,a),r(t,s,a),r(t,o,a),r(t,i,a)},p(t,n){if(t.formatTimestamp||t.appState){f=n.appState.timestamps;for(var a=0;a<f.length;a+=1){const s=O(n,f,a);h[a]?h[a].p(t,s):(h[a]=F(s),h[a].c(),h[a].m(e,null))}for(;a<h.length;a+=1)h[a].d(1);h.length=f.length}},d(t){t&&m(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(h,t),t&&(m(n),m(s),m(o),m(i)),a(p)}}}function F(t){var e,n,a,s,o,h,g=t.formatTimestamp(t.t);function v(){return t.click_handler(t)}return{c(){e=l("li"),n=p(g),a=u(),(s=l("button")).textContent="Delete",o=u(),d(s,"class","small svelte-1lyumdb"),d(e,"class","svelte-1lyumdb"),h=c(s,"click",v)},m(t,m){r(t,e,m),i(e,n),i(e,a),i(e,s),i(e,o)},p(e,a){t=a,e.appState&&g!==(g=t.formatTimestamp(t.t))&&f(n,g)},d(t){t&&m(e),h()}}}function J(e){var n,a,s,o,c;function h(t){return t.appState.newTimestamp?A:M}var g=h(e),v=g(e),S=e.appState.timestamps.length&&B(e);return{c(){n=l("div"),a=l("h1"),s=p(e.name),o=u(),v.c(),c=u(),S&&S.c(),d(n,"class","component svelte-1lyumdb")},m(t,e){r(t,n,e),i(n,a),i(a,s),i(n,o),v.m(n,null),i(n,c),S&&S.m(n,null)},p(t,e){t.name&&f(s,e.name),g===(g=h(e))&&v?v.p(t,e):(v.d(1),(v=g(e))&&(v.c(),v.m(n,c))),e.appState.timestamps.length?S?S.p(t,e):((S=B(e)).c(),S.m(n,null)):S&&(S.d(1),S=null)},i:t,o:t,d(t){t&&m(n),v.d(),S&&S.d()}}}function H(t,e,n){let{name:a}=e;const s={timestamps:[],newTimestamp:null},o=t=>`${t.getDate()}/${t.getMonth()+1}/${t.getFullYear()} - ${t.getHours()}:${t.getMinutes()}`,i=()=>{const t=localStorage.getItem("timestamps");let e;try{e=JSON.parse(t)}catch(t){console.log("failed to parse localstorage json."),e=null}return(t=>!!t&&t.constructor===Object)(e)||(console.log("localstorage is not an object. Resetting to {}"),localStorage.setItem("timestamps","{}"),e={}),e},r=t=>{s.timestamps=s.timestamps.filter(e=>e!==t),n("appState",s)};return v(()=>{s.timestamps=(t=>{const e=i();return e[t]?e[t].map(t=>new Date(Date.parse(t))):[]})(a),n("appState",s),s.newTimestamp=null,n("appState",s)}),t.$set=(t=>{"name"in t&&n("name",a=t.name)}),{name:a,appState:s,formatTimestamp:o,prepareNewTimestamp:()=>{var t=new Date;s.newTimestamp={date:t.getDate(),month:t.getMonth(),year:t.getFullYear(),hours:t.getHours(),minutes:t.getMinutes()},n("appState",s)},addTimestamp:()=>{const t=s.newTimestamp;s.timestamps.push(new Date(t.year,t.month,t.date,t.hours,t.minutes)),((t,e)=>{const n=i();n[t]=e,localStorage.setItem("timestamps",JSON.stringify(n))})(a,s.timestamps),s.newTimestamp=null,n("appState",s)},deleteTimestamp:r,cancelAddTimestamp:()=>{const t=s.newTimestamp=null;return n("appState",s),t},reset:()=>{s.timestamps=[],n("appState",s),s.newTimestamp=null,n("appState",s),(t=>{const e=i();delete e[t],localStorage.setItem("timestamps",JSON.stringify(e))})(a)},copy:()=>{const t=s.timestamps.map(o).join();navigator.clipboard.writeText(t)},input0_input_handler:function(){s.newTimestamp.date=this.value,n("appState",s)},input1_input_handler:function(){s.newTimestamp.month=this.value,n("appState",s)},input2_input_handler:function(){s.newTimestamp.hours=this.value,n("appState",s)},input3_input_handler:function(){s.newTimestamp.minutes=this.value,n("appState",s)},click_handler:function({t:t}){return r(t)}}}class L extends j{constructor(t){super(),N(this,t,H,J,o,["name"])}}function R(e){var n,a;return{c(){n=l("div"),a=p(e.model),d(n,"id","main"),d(n,"class","svelte-1n78hvn")},m(t,e){r(t,n,e),i(n,a)},p(t,e){t.model&&f(a,e.model)},i:t,o:t,d(t){t&&m(n)}}}function Y(t,e,n){let a=window.localStorage.getItem("timestamps");return v(()=>{setInterval(()=>{n("model",a=window.localStorage.getItem("timestamps"))},3e3)}),{model:a}}new L({target:document.getElementById("ts1"),props:{name:"TS1"}}),new L({target:document.getElementById("ts2"),props:{name:"TS2"}}),new class extends j{constructor(t){super(),N(this,t,Y,R,o,[])}}({target:document.getElementById("ls")})}();
//# sourceMappingURL=bundle.js.map
